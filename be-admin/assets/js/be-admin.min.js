/*
@codekit-append "bootstrap-colorpicker.js", "bootstrap-datepicker.js", "bootstrap-timepicker.js", "holder.js", "../../vendor/plupload/js/plupload.full.js";
*/// Starta jQuery
$(document).ready(function(){$("div.div-childmenu div.has-children > a").click(function(){$(this).parent().next("div.childpages").slideToggle("fast");$(this).parent().toggleClass("children-open")});$(window).scroll(function(e){var t=$(this).scrollTop();t>=40?$("#scroll-to-top").removeClass("offscreen"):$("#scroll-to-top").addClass("offscreen")});$("header.admin ul.nav > li > a:not(.no-dropdown)").click(function(){$("header.admin ul.nav").find("li.active").removeClass("active");$(this).parent().addClass("active");$("header.admin ul.nav").find(".submenu").removeClass("active");$(this).next().addClass("active");return!1});$(document).mouseup(function(e){var t=$(".submenu");if(t.has(e.target).length===0){t.removeClass("active");$(this).find("li.active").removeClass("active")}});$("div.photo").hover(function(){$(this).find("a.change-photo").show()},function(){$(this).find("a.change-photo").hide()});$("#search-trigger").click(function(){$("#q").focus()});$("#scroll-to-top").click(function(){$("html, body").animate({scrollTop:0},"fast")});$("table.table tr").hover(function(){$(this).find(".row-show-on-hover").show()},function(){$(this).find(".row-show-on-hover").hide()});$("*[rel=tooltip]").tooltip({animation:!1,delay:{show:500,hide:100},placement:"top"});$("a[rel=popover]").popover({animation:!0,delay:{show:500,hide:100},placement:"right",html:!0}).click(function(e){e.preventDefault()})});!function(e){var t=function(e){this.value={h:1,s:1,b:1,a:1};this.setColor(e)};t.prototype={constructor:t,setColor:function(t){t=t.toLowerCase();var n=this;e.each(r.stringParsers,function(e,i){var s=i.re.exec(t),o=s&&i.parse(s),u=i.space||"rgba";if(o){u==="hsla"?n.value=r.RGBtoHSB.apply(null,r.HSLtoRGB.apply(null,o)):n.value=r.RGBtoHSB.apply(null,o);return!1}})},setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setLightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=parseInt((1-e)*100,10)/100},toRGB:function(e,t,n,r){if(!e){e=this.value.h;t=this.value.s;n=this.value.b}e*=360;var i,s,o,u,a;e=e%360/60;a=n*t;u=a*(1-Math.abs(e%2-1));i=s=o=n-a;e=~~e;i+=[a,u,0,0,u,a][e];s+=[u,a,a,u,0,0][e];o+=[0,0,u,a,a,u][e];return{r:Math.round(i*255),g:Math.round(s*255),b:Math.round(o*255),a:r||this.value.a}},toHex:function(e,t,n,r){var i=this.toRGB(e,t,n,r);return"#"+(1<<24|parseInt(i.r)<<16|parseInt(i.g)<<8|parseInt(i.b)).toString(16).substr(1)},toHSL:function(e,t,n,r){if(!e){e=this.value.h;t=this.value.s;n=this.value.b}var i=e,s=(2-t)*n,o=t*n;s>0&&s<=1?o/=s:o/=2-s;s/=2;o>1&&(o=1);return{h:i,s:o,l:s,a:r||this.value.a}}};var n=function(t,n){this.element=e(t);var i=n.format||this.element.data("color-format")||"hex";this.format=r.translateFormats[i];this.isInput=this.element.is("input");this.component=this.element.is(".color")?this.element.find(".add-on"):!1;this.picker=e(r.template).appendTo("body").on("mousedown",e.proxy(this.mousedown,this));this.isInput?this.element.on({focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this)}):this.component?this.component.on({click:e.proxy(this.show,this)}):this.element.on({click:e.proxy(this.show,this)});if(i==="rgba"||i==="hsla"){this.picker.addClass("alpha");this.alpha=this.picker.find(".colorpicker-alpha")[0].style}if(this.component){this.picker.find(".colorpicker-color").hide();this.preview=this.element.find("i")[0].style}else this.preview=this.picker.find("div:last")[0].style;this.base=this.picker.find("div:first")[0].style;this.update()};n.prototype={constructor:n,show:function(t){this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();e(window).on("resize",e.proxy(this.place,this));if(!this.isInput&&t){t.stopPropagation();t.preventDefault()}e(document).on({mousedown:e.proxy(this.hide,this)});this.element.trigger({type:"show",color:this.color})},update:function(){this.color=new t(this.isInput?this.element.prop("value"):this.element.data("color"));this.picker.find("i").eq(0).css({left:this.color.value.s*100,top:100-this.color.value.b*100}).end().eq(1).css("top",100*(1-this.color.value.h)).end().eq(2).css("top",100*(1-this.color.value.a));this.previewColor()},setValue:function(e){this.color=new t(e);this.picker.find("i").eq(0).css({left:this.color.value.s*100,top:100-this.color.value.b*100}).end().eq(1).css("top",100*(1-this.color.value.h)).end().eq(2).css("top",100*(1-this.color.value.a));this.previewColor();this.element.trigger({type:"changeColor",color:this.color})},hide:function(){this.picker.hide();e(window).off("resize",this.place);if(!this.isInput){e(document).off({mousedown:this.hide});this.component&&this.element.find("input").prop("value",this.format.call(this));this.element.data("color",this.format.call(this))}else this.element.prop("value",this.format.call(this));this.element.trigger({type:"hide",color:this.color})},place:function(){var e=this.component?this.component.offset():this.element.offset();this.picker.css({top:e.top+this.height,left:e.left})},previewColor:function(){try{this.preview.backgroundColor=this.format.call(this)}catch(e){this.preview.backgroundColor=this.color.toHex()}this.base.backgroundColor=this.color.toHex(this.color.value.h,1,1,1);this.alpha&&(this.alpha.backgroundColor=this.color.toHex())},pointer:null,slider:null,mousedown:function(t){t.stopPropagation();t.preventDefault();var n=e(t.target),i=n.closest("div");if(!i.is(".colorpicker")){if(i.is(".colorpicker-saturation"))this.slider=e.extend({},r.sliders.saturation);else if(i.is(".colorpicker-hue"))this.slider=e.extend({},r.sliders.hue);else{if(!i.is(".colorpicker-alpha"))return!1;this.slider=e.extend({},r.sliders.alpha)}var s=i.offset();this.slider.knob=i.find("i")[0].style;this.slider.left=t.pageX-s.left;this.slider.top=t.pageY-s.top;this.pointer={left:t.pageX,top:t.pageY};e(document).on({mousemove:e.proxy(this.mousemove,this),mouseup:e.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(e){e.stopPropagation();e.preventDefault();var t=Math.max(0,Math.min(this.slider.maxLeft,this.slider.left+((e.pageX||this.pointer.left)-this.pointer.left))),n=Math.max(0,Math.min(this.slider.maxTop,this.slider.top+((e.pageY||this.pointer.top)-this.pointer.top)));this.slider.knob.left=t+"px";this.slider.knob.top=n+"px";this.slider.callLeft&&this.color[this.slider.callLeft].call(this.color,t/100);this.slider.callTop&&this.color[this.slider.callTop].call(this.color,n/100);this.previewColor();this.element.trigger({type:"changeColor",color:this.color});return!1},mouseup:function(t){t.stopPropagation();t.preventDefault();e(document).off({mousemove:this.mousemove,mouseup:this.mouseup});return!1}};e.fn.colorpicker=function(t){return this.each(function(){var r=e(this),i=r.data("colorpicker"),s=typeof t=="object"&&t;i||r.data("colorpicker",i=new n(this,e.extend({},e.fn.colorpicker.defaults,s)));typeof t=="string"&&i[t]()})};e.fn.colorpicker.defaults={};e.fn.colorpicker.Constructor=n;var r={translateFormats:{rgb:function(){var e=this.color.toRGB();return"rgb("+e.r+","+e.g+","+e.b+")"},rgba:function(){var e=this.color.toRGB();return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},hsl:function(){var e=this.color.toHSL();return"hsl("+Math.round(e.h*360)+","+Math.round(e.s*100)+"%,"+Math.round(e.l*100)+"%)"},hsla:function(){var e=this.color.toHSL();return"hsla("+Math.round(e.h*360)+","+Math.round(e.s*100)+"%,"+Math.round(e.l*100)+"%,"+e.a+")"},hex:function(){return this.color.toHex()}},sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setLightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},RGBtoHSB:function(e,t,n,r){e/=255;t/=255;n/=255;var i,s,o,u;o=Math.max(e,t,n);u=o-Math.min(e,t,n);i=u===0?null:o==e?(t-n)/u:o==t?(n-e)/u+2:(e-t)/u+4;i=(i+360)%6*60/360;s=u===0?0:u/o;return{h:i||1,s:s,b:o,a:r||1}},HueToRGB:function(e,t,n){n<0?n+=1:n>1&&(n-=1);return n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e},HSLtoRGB:function(e,t,n,i){t<0&&(t=0);var s;n<=.5?s=n*(1+t):s=n+t-n*t;var o=2*n-s,u=e+1/3,a=e,f=e-1/3,l=Math.round(r.HueToRGB(o,s,u)*255),c=Math.round(r.HueToRGB(o,s,a)*255),h=Math.round(r.HueToRGB(o,s,f)*255);return[l,c,h,i||1]},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}}],template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div></div>'}}(window.jQuery);!function(e){var t=function(t,r){this.element=e(t);this.format=n.parseFormat(r.format||this.element.data("date-format")||"mm/dd/yyyy");this.picker=e(n.template).appendTo("body").on({click:e.proxy(this.click,this),mousedown:e.proxy(this.mousedown,this)});this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on"):!1;this.isInput?this.element.on({focus:e.proxy(this.show,this),blur:e.proxy(this.hide,this),keyup:e.proxy(this.update,this)}):this.component?this.component.on("click",e.proxy(this.show,this)):this.element.on("click",e.proxy(this.show,this));this.minViewMode=r.minViewMode||this.element.data("date-minviewmode")||0;if(typeof this.minViewMode=="string")switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}this.viewMode=r.viewMode||this.element.data("date-viewmode")||0;if(typeof this.viewMode=="string")switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode;this.weekStart=r.weekStart||this.element.data("date-weekstart")||0;this.weekEnd=this.weekStart===0?6:this.weekStart-1;this.fillDow();this.fillMonths();this.update();this.showMode()};t.prototype={constructor:t,show:function(t){this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();e(window).on("resize",e.proxy(this.place,this));if(t){t.stopPropagation();t.preventDefault()}this.isInput||e(document).on("mousedown",e.proxy(this.hide,this));this.element.trigger({type:"show",date:this.date})},hide:function(){this.picker.hide();e(window).off("resize",this.place);this.viewMode=this.startViewMode;this.showMode();this.isInput||e(document).off("mousedown",this.hide);this.set();this.element.trigger({type:"hide",date:this.date})},set:function(){var e=n.formatDate(this.date,this.format);if(!this.isInput){this.component&&this.element.find("input").prop("value",e);this.element.data("date",e)}else this.element.prop("value",e)},setValue:function(e){typeof e=="string"?this.date=n.parseDate(e,this.format):this.date=new Date(e);this.set();this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0);this.fill()},place:function(){var e=this.component?this.component.offset():this.element.offset();this.picker.css({top:e.top+this.height,left:e.left})},update:function(e){this.date=n.parseDate(typeof e=="string"?e:this.isInput?this.element.prop("value"):this.element.data("date"),this.format);this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0);this.fill()},fillDow:function(){var e=this.weekStart,t="<tr>";while(e<this.weekStart+7)t+='<th class="dow">'+n.dates.daysMin[e++%7]+"</th>";t+="</tr>";this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){var e="",t=0;while(t<12)e+='<span class="month">'+n.dates.monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").append(e)},fill:function(){var e=new Date(this.viewDate),t=e.getFullYear(),r=e.getMonth(),i=this.date.valueOf();this.picker.find(".datepicker-days th:eq(1)").text(n.dates.months[r]+" "+t);var s=new Date(t,r-1,28,0,0,0,0),o=n.getDaysInMonth(s.getFullYear(),s.getMonth());s.setDate(o);s.setDate(o-(s.getDay()-this.weekStart+7)%7);var u=new Date(s);u.setDate(u.getDate()+42);u=u.valueOf();html=[];var a;while(s.valueOf()<u){s.getDay()===this.weekStart&&html.push("<tr>");a="";s.getMonth()<r?a+=" old":s.getMonth()>r&&(a+=" new");s.valueOf()===i&&(a+=" active");html.push('<td class="day'+a+'">'+s.getDate()+"</td>");s.getDay()===this.weekEnd&&html.push("</tr>");s.setDate(s.getDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(html.join(""));var f=this.date.getFullYear(),l=this.picker.find(".datepicker-months").find("th:eq(1)").text(t).end().find("span").removeClass("active");f===t&&l.eq(this.date.getMonth()).addClass("active");html="";t=parseInt(t/10,10)*10;var c=this.picker.find(".datepicker-years").find("th:eq(1)").text(t+"-"+(t+9)).end().find("td");t-=1;for(var h=-1;h<11;h++){html+='<span class="year'+(h===-1||h===10?" old":"")+(f===t?" active":"")+'">'+t+"</span>";t+=1}c.html(html)},click:function(t){t.stopPropagation();t.preventDefault();var r=e(t.target).closest("span, td, th");if(r.length===1)switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"switch":this.showMode(1);break;case"prev":case"next":this.viewDate["set"+n.modes[this.viewMode].navFnc].call(this.viewDate,this.viewDate["get"+n.modes[this.viewMode].navFnc].call(this.viewDate)+n.modes[this.viewMode].navStep*(r[0].className==="prev"?-1:1));this.fill();this.set()}break;case"span":if(r.is(".month")){var i=r.parent().find("span").index(r);this.viewDate.setMonth(i)}else{var s=parseInt(r.text(),10)||0;this.viewDate.setFullYear(s)}if(this.viewMode!==0){this.date=new Date(this.viewDate);this.element.trigger({type:"changeDate",date:this.date,viewMode:n.modes[this.viewMode].clsName})}this.showMode(-1);this.fill();this.set();break;case"td":if(r.is(".day")){var o=parseInt(r.text(),10)||1,i=this.viewDate.getMonth();r.is(".old")?i-=1:r.is(".new")&&(i+=1);var s=this.viewDate.getFullYear();this.date=new Date(s,i,o,0,0,0,0);this.viewDate=new Date(s,i,Math.min(28,o),0,0,0,0);this.fill();this.set();this.element.trigger({type:"changeDate",date:this.date,viewMode:n.modes[this.viewMode].clsName})}}},mousedown:function(e){e.stopPropagation();e.preventDefault()},showMode:function(e){e&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+e)));this.picker.find(">div").hide().filter(".datepicker-"+n.modes[this.viewMode].clsName).show()}};e.fn.datepicker=function(n,r){return this.each(function(){var i=e(this),s=i.data("datepicker"),o=typeof n=="object"&&n;s||i.data("datepicker",s=new t(this,e.extend({},e.fn.datepicker.defaults,o)));typeof n=="string"&&s[n](r)})};e.fn.datepicker.defaults={};e.fn.datepicker.Constructor=t;var n={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],dates:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,n.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},parseFormat:function(e){var t=e.match(/[.\/\-\s].*?/),n=e.split(/\W+/);if(!t||!n||n.length===0)throw new Error("Invalid date format.");return{separator:t,parts:n}},parseDate:function(e,t){var n=e.split(t.separator),e=new Date,r;e.setHours(0);e.setMinutes(0);e.setSeconds(0);e.setMilliseconds(0);if(n.length===t.parts.length)for(var i=0,s=t.parts.length;i<s;i++){r=parseInt(n[i],10)||1;switch(t.parts[i]){case"dd":case"d":e.setDate(r);break;case"mm":case"m":e.setMonth(r-1);break;case"yy":e.setFullYear(2e3+r);break;case"yyyy":e.setFullYear(r)}}return e},formatDate:function(e,t){var n={d:e.getDate(),m:e.getMonth()+1,yy:e.getFullYear().toString().substring(2),yyyy:e.getFullYear()};n.dd=(n.d<10?"0":"")+n.d;n.mm=(n.m<10?"0":"")+n.m;var e=[];for(var r=0,i=t.parts.length;r<i;r++)e.push(n[t.parts[r]]);return e.join(t.separator)},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};n.template='<div class="datepicker dropdown-menu"><div class="datepicker-days"><table class=" table-condensed">'+n.headTemplate+"<tbody></tbody>"+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+n.headTemplate+n.contTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+n.headTemplate+n.contTemplate+"</table>"+"</div>"+"</div>"}(window.jQuery);!function(e){"use strict";var t=function(t,n){this.$element=e(t);this.options=e.extend({},e.fn.timepicker.defaults,n,this.$element.data());this.minuteStep=this.options.minuteStep||this.minuteStep;this.secondStep=this.options.secondStep||this.secondStep;this.showMeridian=this.options.showMeridian||this.showMeridian;this.showSeconds=this.options.showSeconds||this.showSeconds;this.showInputs=this.options.showInputs||this.showInputs;this.disableFocus=this.options.disableFocus||this.disableFocus;this.template=this.options.template||this.template;this.modalBackdrop=this.options.modalBackdrop||this.modalBackdrop;this.defaultTime=this.options.defaultTime||this.defaultTime;this.open=!1;this.init()};t.prototype={constructor:t,init:function(){if(this.$element.parent().hasClass("input-append")){this.$element.parent(".input-append").find(".add-on").on("click",e.proxy(this.showWidget,this));this.$element.on({focus:e.proxy(this.highlightUnit,this),click:e.proxy(this.highlightUnit,this),keypress:e.proxy(this.elementKeypress,this),blur:e.proxy(this.blurElement,this)})}else this.template?this.$element.on({focus:e.proxy(this.showWidget,this),click:e.proxy(this.showWidget,this),blur:e.proxy(this.blurElement,this)}):this.$element.on({focus:e.proxy(this.highlightUnit,this),click:e.proxy(this.highlightUnit,this),keypress:e.proxy(this.elementKeypress,this),blur:e.proxy(this.blurElement,this)});this.$widget=e(this.getTemplate()).appendTo("body");this.$widget.on("click",e.proxy(this.widgetClick,this));this.showInputs&&this.$widget.find("input").on({click:function(){this.select()},keypress:e.proxy(this.widgetKeypress,this),change:e.proxy(this.updateFromWidgetInputs,this)});this.setDefaultTime(this.defaultTime)},showWidget:function(t){t.stopPropagation();t.preventDefault();if(this.open)return;this.$element.trigger("show");this.disableFocus&&this.$element.blur();var n=e.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});this.updateFromElementVal();e("html").trigger("click.timepicker.data-api").one("click.timepicker.data-api",e.proxy(this.hideWidget,this));if(this.template==="modal")this.$widget.modal("show").on("hidden",e.proxy(this.hideWidget,this));else{this.$widget.css({top:n.top+n.height,left:n.left});this.open||this.$widget.addClass("open")}this.open=!0;this.$element.trigger("shown")},hideWidget:function(){this.$element.trigger("hide");this.template==="modal"?this.$widget.modal("hide"):this.$widget.removeClass("open");this.open=!1;this.$element.trigger("hidden")},widgetClick:function(t){t.stopPropagation();t.preventDefault();var n=e(t.target).closest("a").data("action");if(n){this[n]();this.update()}},widgetKeypress:function(t){var n=e(t.target).closest("input").attr("name");switch(t.keyCode){case 9:this.showMeridian?n=="meridian"&&this.hideWidget():this.showSeconds?n=="second"&&this.hideWidget():n=="minute"&&this.hideWidget();break;case 27:this.hideWidget();break;case 38:switch(n){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}this.update();break;case 40:switch(n){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}this.update()}},elementKeypress:function(e){var t=this.$element.get(0);switch(e.keyCode){case 0:break;case 9:this.updateFromElementVal();if(this.showMeridian){if(this.highlightedUnit!="meridian"){e.preventDefault();this.highlightNextUnit()}}else if(this.showSeconds){if(this.highlightedUnit!="second"){e.preventDefault();this.highlightNextUnit()}}else if(this.highlightedUnit!="minute"){e.preventDefault();this.highlightNextUnit()}break;case 27:this.updateFromElementVal();break;case 37:this.updateFromElementVal();this.highlightPrevUnit();break;case 38:switch(this.highlightedUnit){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}this.updateElement();break;case 39:this.updateFromElementVal();this.highlightNextUnit();break;case 40:switch(this.highlightedUnit){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}this.updateElement()}e.keyCode!==0&&e.keyCode!==8&&e.keyCode!==9&&e.keyCode!==46&&e.preventDefault()},setValues:function(e){if(this.showMeridian){var t=e.split(" "),n=t[0].split(":");this.meridian=t[1]}else var n=e.split(":");this.hour=parseInt(n[0],10);this.minute=parseInt(n[1],10);this.second=parseInt(n[2],10);isNaN(this.hour)&&(this.hour=0);isNaN(this.minute)&&(this.minute=0);if(this.showMeridian){this.hour>12?this.hour=12:this.hour<1&&(this.hour=1);if(this.meridian=="am"||this.meridian=="a")this.meridian="AM";else if(this.meridian=="pm"||this.meridian=="p")this.meridian="PM";this.meridian!="AM"&&this.meridian!="PM"&&(this.meridian="AM")}else this.hour>=24?this.hour=23:this.hour<0&&(this.hour=0);this.minute<0?this.minute=0:this.minute>=60&&(this.minute=59);this.showSeconds&&(isNaN(this.second)?this.second=0:this.second<0?this.second=0:this.second>=60&&(this.second=59));this.$element.val()!=""&&this.updateElement();this.updateWidget()},setMeridian:function(e){e=="a"||e=="am"||e=="AM"?this.meridian="AM":e=="p"||e=="pm"||e=="PM"?this.meridian="PM":this.updateWidget();this.updateElement()},setDefaultTime:function(e){if(e){if(e==="current"){var t=new Date,n=t.getHours(),r=Math.floor(t.getMinutes()/this.minuteStep)*this.minuteStep,i=Math.floor(t.getSeconds()/this.secondStep)*this.secondStep,s="AM";if(this.showMeridian)if(n===0)n=12;else if(n>=12){n>12&&(n-=12);s="PM"}else s="AM";this.hour=n;this.minute=r;this.second=i;this.meridian=s}else e==="value"?this.setValues(this.$element.val()):this.setValues(e);this.$element.val()!=""&&this.updateElement();this.updateWidget()}else{this.hour=0;this.minute=0;this.second=0}},formatTime:function(e,t,n,r){e=e<10?"0"+e:e;t=t<10?"0"+t:t;n=n<10?"0"+n:n;return e+":"+t+(this.showSeconds?":"+n:"")+(this.showMeridian?" "+r:"")},getTime:function(){return this.formatTime(this.hour,this.minute,this.second,this.meridian)},setTime:function(e){this.setValues(e);this.update()},update:function(){this.updateElement();this.updateWidget()},blurElement:function(){this.highlightedUnit=undefined;this.updateFromElementVal()},updateElement:function(){var e=this.getTime();this.$element.val(e).change();switch(this.highlightedUnit){case"hour":this.highlightHour();break;case"minute":this.highlightMinute();break;case"second":this.highlightSecond();break;case"meridian":this.highlightMeridian()}},updateWidget:function(){if(this.showInputs){this.$widget.find("input.bootstrap-timepicker-hour").val(this.hour<10?"0"+this.hour:this.hour);this.$widget.find("input.bootstrap-timepicker-minute").val(this.minute<10?"0"+this.minute:this.minute);this.showSeconds&&this.$widget.find("input.bootstrap-timepicker-second").val(this.second<10?"0"+this.second:this.second);this.showMeridian&&this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)}else{this.$widget.find("span.bootstrap-timepicker-hour").text(this.hour);this.$widget.find("span.bootstrap-timepicker-minute").text(this.minute<10?"0"+this.minute:this.minute);this.showSeconds&&this.$widget.find("span.bootstrap-timepicker-second").text(this.second<10?"0"+this.second:this.second);this.showMeridian&&this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian)}},updateFromElementVal:function(e){var t=this.$element.val();if(t){this.setValues(t);this.updateWidget()}},updateFromWidgetInputs:function(){var t=e("input.bootstrap-timepicker-hour",this.$widget).val()+":"+e("input.bootstrap-timepicker-minute",this.$widget).val()+(this.showSeconds?":"+e("input.bootstrap-timepicker-second",this.$widget).val():"")+(this.showMeridian?" "+e("input.bootstrap-timepicker-meridian",this.$widget).val():"");this.setValues(t)},getCursorPosition:function(){var e=this.$element.get(0);if("selectionStart"in e)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange(),n=document.selection.createRange().text.length;t.moveStart("character",-e.value.length);return t.text.length-n}},highlightUnit:function(){var e=this.$element.get(0);this.position=this.getCursorPosition();this.position>=0&&this.position<=2?this.highlightHour():this.position>=3&&this.position<=5?this.highlightMinute():this.position>=6&&this.position<=8?this.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&this.position<=11&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.highlightMeridian();break;case"second":this.highlightMeridian();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMeridian();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){this.highlightedUnit="hour";this.$element.get(0).setSelectionRange(0,2)},highlightMinute:function(){this.highlightedUnit="minute";this.$element.get(0).setSelectionRange(3,5)},highlightSecond:function(){this.highlightedUnit="second";this.$element.get(0).setSelectionRange(6,8)},highlightMeridian:function(){this.highlightedUnit="meridian";this.showSeconds?this.$element.get(0).setSelectionRange(9,11):this.$element.get(0).setSelectionRange(6,8)},incrementHour:function(){if(this.showMeridian)if(this.hour===11)this.toggleMeridian();else if(this.hour===12)return this.hour=1;if(this.hour===23)return this.hour=0;this.hour=this.hour+1},decrementHour:function(){if(this.showMeridian){if(this.hour===1)return this.hour=12;this.hour===12&&this.toggleMeridian()}if(this.hour===0)return this.hour=23;this.hour=this.hour-1},incrementMinute:function(){var e=this.minute+this.minuteStep-this.minute%this.minuteStep;if(e>59){this.incrementHour();this.minute=e-60}else this.minute=e},decrementMinute:function(){var e=this.minute-this.minuteStep;if(e<0){this.decrementHour();this.minute=e+60}else this.minute=e},incrementSecond:function(){var e=this.second+this.secondStep-this.second%this.secondStep;if(e>59){this.incrementMinute();this.second=e-60}else this.second=e},decrementSecond:function(){var e=this.second-this.secondStep;if(e<0){this.decrementMinute();this.second=e+60}else this.second=e},toggleMeridian:function(){this.meridian=this.meridian==="AM"?"PM":"AM";this.update()},getTemplate:function(){if(this.options.templates[this.options.template])return this.options.templates[this.options.template];if(this.showInputs)var e='<input type="text" name="hour" class="bootstrap-timepicker-hour" maxlength="2"/>',t='<input type="text" name="minute" class="bootstrap-timepicker-minute" maxlength="2"/>',n='<input type="text" name="second" class="bootstrap-timepicker-second" maxlength="2"/>',r='<input type="text" name="meridian" class="bootstrap-timepicker-meridian" maxlength="2"/>';else var e='<span class="bootstrap-timepicker-hour"></span>',t='<span class="bootstrap-timepicker-minute"></span>',n='<span class="bootstrap-timepicker-second"></span>',r='<span class="bootstrap-timepicker-meridian"></span>';var i='<table class="'+(this.showSeconds?"show-seconds":"")+" "+(this.showMeridian?"show-meridian":"")+'">'+"<tr>"+'<td><a href="#" data-action="incrementHour"><i class="icon-chevron-up"></i></a></td>'+'<td class="separator">&nbsp;</td>'+'<td><a href="#" data-action="incrementMinute"><i class="icon-chevron-up"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><i class="icon-chevron-up"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="icon-chevron-up"></i></a></td>':"")+"</tr>"+"<tr>"+"<td>"+e+"</td> "+'<td class="separator">:</td>'+"<td>"+t+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+n+"</td>":"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td>'+r+"</td>":"")+"</tr>"+"<tr>"+'<td><a href="#" data-action="decrementHour"><i class="icon-chevron-down"></i></a></td>'+'<td class="separator"></td>'+'<td><a href="#" data-action="decrementMinute"><i class="icon-chevron-down"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><i class="icon-chevron-down"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><i class="icon-chevron-down"></i></a></td>':"")+"</tr>"+"</table>",s;switch(this.options.template){case"modal":s='<div class="bootstrap-timepicker modal hide fade in" style="top: 30%; margin-top: 0; width: 200px; margin-left: -100px;" data-backdrop="'+(this.modalBackdrop?"true":"false")+'">'+'<div class="modal-header">'+'<a href="#" class="close" data-dismiss="modal">Ã—</a>'+"<h3>Pick a Time</h3>"+"</div>"+'<div class="modal-content">'+i+"</div>"+'<div class="modal-footer">'+'<a href="#" class="btn btn-primary" data-dismiss="modal">Ok</a>'+"</div>"+"</div>";break;case"dropdown":s='<div class="bootstrap-timepicker dropdown-menu">'+i+"</div>"}return s}};e.fn.timepicker=function(n){return this.each(function(){var r=e(this),i=r.data("timepicker"),s=typeof n=="object"&&n;i||r.data("timepicker",i=new t(this,s));typeof n=="string"&&i[n]()})};e.fn.timepicker.defaults={minuteStep:15,secondStep:15,disableFocus:!1,defaultTime:"current",showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",modalBackdrop:!1,templates:{}};e.fn.timepicker.Constructor=t}(window.jQuery);var Holder=Holder||{};(function(e,t){function o(e,t){var n="complete",r="readystatechange",i=!1,s=i,o=!0,u=e.document,a=u.documentElement,f=u.addEventListener?"addEventListener":"attachEvent",l=u.addEventListener?"removeEventListener":"detachEvent",c=u.addEventListener?"":"on",h=function(o){(o.type!=r||u.readyState==n)&&((o.type=="load"?e:u)[l](c+o.type,h,i),!s&&(s=!0)&&t.call(e,null))},p=function(){try{a.doScroll("left")}catch(e){setTimeout(p,50);return}h("poll")};if(u.readyState==n)t.call(e,"lazy");else{if(u.createEventObject&&a.doScroll){try{o=!e.frameElement}catch(d){}o&&p()}u[f](c+"DOMContentLoaded",h,i),u[f](c+r,h,i),e[f](c+"load",h,i)}}function u(e){e=e.match(/^(\W)?(.*)/);var t=document["getElement"+(e[1]?e[1]=="#"?"ById":"sByClassName":"sByTagName")](e[2]),n=[];t!=null&&(t.length?n=t:t.length==0?n=t:n=[t]);return n}function a(e,t){var n={};for(var r in e)n[r]=e[r];for(var i in t)n[i]=t[i];return n}function f(e,t,n){var r=[t,e].sort(),i=Math.round(r[1]/16),s=Math.round(r[0]/16),o=Math.max(n.size,i);return{height:o}}function l(e,t,n,r){var i=f(t.width,t.height,n),o=i.height,u=t.width*r,a=t.height*r,l=n.font?n.font:"sans-serif";s.width=u;s.height=a;e.textAlign="center";e.textBaseline="middle";e.fillStyle=n.background;e.fillRect(0,0,u,a);e.fillStyle=n.foreground;e.font="bold "+o+"px "+l;var c=n.text?n.text:t.width+"x"+t.height;e.measureText(c).width/u>1&&(o=n.size/(e.measureText(c).width/u));e.font="bold "+o*r+"px "+l;e.fillText(c,u/2,a/2,u);return s
.toDataURL("image/png")}function c(e,t,n,i){var s=n.dimensions,o=n.theme,u=n.text?decodeURIComponent(n.text):n.text,f=s.width+"x"+s.height;o=u?a(o,{text:u}):o;o=n.font?a(o,{font:n.font}):o;var c=1;window.devicePixelRatio&&window.devicePixelRatio>1&&(c=window.devicePixelRatio);if(e=="image"){t.setAttribute("data-src",i);t.setAttribute("alt",u?u:o.text?o.text+" ["+f+"]":f);if(r||!n.auto){t.style.width=s.width+"px";t.style.height=s.height+"px"}r?t.style.backgroundColor=o.background:t.setAttribute("src",l(v,s,o,c))}else if(!r){t.style.backgroundImage="url("+l(v,s,o,c)+")";t.style.backgroundSize=s.width+"px "+s.height+"px"}}function h(e,t,n){var r=t.dimensions,i=t.theme,s=t.text,o=r.width+"x"+r.height;i=s?a(i,{text:s}):i;var u=document.createElement("div");u.style.backgroundColor=i.background;u.style.color=i.foreground;u.className=e.className+" holderjs-fluid";u.style.width=t.dimensions.width+(t.dimensions.width.indexOf("%")>0?"":"px");u.style.height=t.dimensions.height+(t.dimensions.height.indexOf("%")>0?"":"px");u.id=e.id;e.style.width=0;e.style.height=0;if(i.text)u.appendChild(document.createTextNode(i.text));else{u.appendChild(document.createTextNode(o));m.push(u);setTimeout(p,0)}e.parentNode.insertBefore(u,e.nextSibling);window.jQuery&&jQuery(function(t){t(e).on("load",function(){e.style.width=u.style.width;e.style.height=u.style.height;t(e).show();t(u).remove()})})}function p(){for(i in m){if(!m.hasOwnProperty(i))continue;var e=m[i],t=e.firstChild;e.style.lineHeight=e.offsetHeight+"px";t.data=e.offsetWidth+"x"+e.offsetHeight}}function d(t,n){var r={theme:g.themes.gray},i=!1;for(sl=t.length,j=0;j<sl;j++){var s=t[j];if(e.flags.dimensions.match(s)){i=!0;r.dimensions=e.flags.dimensions.output(s)}else if(e.flags.fluid.match(s)){i=!0;r.dimensions=e.flags.fluid.output(s);r.fluid=!0}else e.flags.colors.match(s)?r.theme=e.flags.colors.output(s):n.themes[s]?r.theme=n.themes[s]:e.flags.text.match(s)?r.text=e.flags.text.output(s):e.flags.font.match(s)?r.font=e.flags.font.output(s):e.flags.auto.match(s)&&(r.auto=!0)}return i?r:!1}var n=!1,r=!1,s=document.createElement("canvas");document.getElementsByClassName||(document.getElementsByClassName=function(e){var t=document,n,r,i,s=[];if(t.querySelectorAll)return t.querySelectorAll("."+e);if(t.evaluate){r=".//*[contains(concat(' ', @class, ' '), ' "+e+" ')]",n=t.evaluate(r,t,null,0,null);while(i=n.iterateNext())s.push(i)}else{n=t.getElementsByTagName("*"),r=new RegExp("(^|\\s)"+e+"(\\s|$)");for(i=0;i<n.length;i++)r.test(n[i].className)&&s.push(n[i])}return s});window.getComputedStyle||(window.getComputedStyle=function(e,t){return this.el=e,this.getPropertyValue=function(t){var n=/(\-([a-z]){1})/g;return t=="float"&&(t="styleFloat"),n.test(t)&&(t=t.replace(n,function(){return arguments[2].toUpperCase()})),e.currentStyle[t]?e.currentStyle[t]:null},this});Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(e){var t=this.__proto__||this.constructor.prototype;return e in this&&(!(e in t)||t[e]!==this[e])});if(!s.getContext)r=!0;else if(s.toDataURL("image/png").indexOf("data:image/png")<0)r=!0;else var v=s.getContext("2d");var m=[],g={domain:"holder.js",images:"img",bgnodes:".holderjs",themes:{gray:{background:"#eee",foreground:"#aaa",size:12},social:{background:"#3a5a97",foreground:"#fff",size:12},industrial:{background:"#434A52",foreground:"#C2F200",size:12}},stylesheet:".holderjs-fluid {font-size:16px;font-weight:bold;text-align:center;font-family:sans-serif;margin:0}"};e.flags={dimensions:{regex:/^(\d+)x(\d+)$/,output:function(e){var t=this.regex.exec(e);return{width:+t[1],height:+t[2]}}},fluid:{regex:/^([0-9%]+)x([0-9%]+)$/,output:function(e){var t=this.regex.exec(e);return{width:t[1],height:t[2]}}},colors:{regex:/#([0-9a-f]{3,})\:#([0-9a-f]{3,})/i,output:function(e){var t=this.regex.exec(e);return{size:g.themes.gray.size,foreground:"#"+t[2],background:"#"+t[1]}}},text:{regex:/text\:(.*)/,output:function(e){return this.regex.exec(e)[1]}},font:{regex:/font\:(.*)/,output:function(e){return this.regex.exec(e)[1]}},auto:{regex:/^auto$/}};for(var y in e.flags){if(!e.flags.hasOwnProperty(y))continue;e.flags[y].match=function(e){return e.match(this.regex)}}e.add_theme=function(t,n){t!=null&&n!=null&&(g.themes[t]=n);return e};e.add_image=function(t,n){var r=u(n);if(r.length)for(var i=0,s=r.length;i<s;i++){var o=document.createElement("img");o.setAttribute("data-src",t);r[i].appendChild(o)}return e};e.run=function(t){var r=a(g,t),i=[];r.images instanceof window.NodeList?imageNodes=r.images:r.images instanceof window.Node?imageNodes=[r.images]:imageNodes=u(r.images);r.elements instanceof window.NodeList?bgnodes=r.bgnodes:r.bgnodes instanceof window.Node?bgnodes=[r.bgnodes]:bgnodes=u(r.bgnodes);n=!0;for(l=0,f=imageNodes.length;l<f;l++)i.push(imageNodes[l]);var s=document.getElementById("holderjs-style");if(!s){s=document.createElement("style");s.setAttribute("id","holderjs-style");s.type="text/css";document.getElementsByTagName("head")[0].appendChild(s)}s.styleSheet?s.styleSheet+=r.stylesheet:s.textContent+=r.stylesheet;var o=new RegExp(r.domain+'/(.*?)"?\\)');for(var f=bgnodes.length,l=0;l<f;l++){var p=window.getComputedStyle(bgnodes[l],null).getPropertyValue("background-image"),v=p.match(o);if(v){var m=d(v[1].split("/"),r);m&&c("background",bgnodes[l],m,p)}}for(var f=i.length,l=0;l<f;l++){var p=i[l].getAttribute("src")||i[l].getAttribute("data-src");if(p!=null&&p.indexOf(r.domain)>=0){var m=d(p.substr(p.lastIndexOf(r.domain)+r.domain.length+1).split("/"),r);m&&(m.fluid?h(i[l],m,p):c("image",i[l],m,p))}}return e};o(t,function(){if(window.addEventListener){window.addEventListener("resize",p,!1);window.addEventListener("orientationchange",p,!1)}else window.attachEvent("onresize",p);n||e.run()});typeof define=="function"&&define.amd&&define("Holder",[],function(){return e})})(Holder,window);(function(){function l(){this.returnValue=!1}function c(){this.cancelBubble=!0}var e=0,t=[],n={},r={},i={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},s=/[<>&\"\']/g,o,u=window.setTimeout,a={},f;(function(e){var t=e.split(/,/),n,i,s;for(n=0;n<t.length;n+=2){s=t[n+1].split(/ /);for(i=0;i<s.length;i++)r[s[i]]=t[n]}})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/vnd.rn-realvideo,rv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe");var h={VERSION:"1.5.4",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:r,ua:function(){var e=navigator,t=e.userAgent,n=e.vendor,r,i,s;r=/WebKit/.test(t);s=r&&n.indexOf("Apple")!==-1;i=window.opera&&window.opera.buildNumber;return{windows:navigator.platform.indexOf("Win")!==-1,ie:!r&&!i&&/MSIE/gi.test(t)&&/Explorer/gi.test(e.appName),webkit:r,gecko:!r&&/Gecko/.test(t),safari:s,opera:!!i}}(),typeOf:function(e){return{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(e){h.each(arguments,function(t,n){n>0&&h.each(t,function(t,n){e[n]=t})});return e},cleanName:function(e){var t,n;n=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(t=0;t<n.length;t+=2)e=e.replace(n[t],n[t+1]);e=e.replace(/\s+/g,"_");e=e.replace(/[^a-z0-9_\-\.]+/gi,"");return e},addRuntime:function(e,n){n.name=e;t[e]=n;t.push(n);return n},guid:function(){var t=(new Date).getTime().toString(32),n;for(n=0;n<5;n++)t+=Math.floor(Math.random()*65535).toString(32);return(h.guidPrefix||"p")+t+(e++).toString(32)},buildUrl:function(e,t){var n="";h.each(t,function(e,t){n+=(n?"&":"")+encodeURIComponent(t)+"="+encodeURIComponent(e)});n&&(e+=(e.indexOf("?")>0?"&":"?")+n);return e},each:function(e,t){var n,r,i;if(e){n=e.length;if(n===o){for(r in e)if(e.hasOwnProperty(r)&&t(e[r],r)===!1)return}else for(i=0;i<n;i++)if(t(e[i],i)===!1)return}},formatSize:function(e){return e===o||/\D/.test(e)?h.translate("N/A"):e>1073741824?Math.round(e/1073741824,1)+" GB":e>1048576?Math.round(e/1048576,1)+" MB":e>1024?Math.round(e/1024,1)+" KB":e+" b"},getPos:function(e,t){function a(e){var t,n,r=0,i=0;if(e){n=e.getBoundingClientRect();t=s.compatMode==="CSS1Compat"?s.documentElement:s.body;r=n.left+t.scrollLeft;i=n.top+t.scrollTop}return{x:r,y:i}}var n=0,r=0,i,s=document,o,u;e=e;t=t||s.body;if(e&&e.getBoundingClientRect&&navigator.userAgent.indexOf("MSIE")>0&&s.documentMode<8){o=a(e);u=a(t);return{x:o.x-u.x,y:o.y-u.y}}i=e;while(i&&i!=t&&i.nodeType){n+=i.offsetLeft||0;r+=i.offsetTop||0;i=i.offsetParent}i=e.parentNode;while(i&&i!=t&&i.nodeType){n-=i.scrollLeft||0;r-=i.scrollTop||0;i=i.parentNode}return{x:n,y:r}},getSize:function(e){return{w:e.offsetWidth||e.clientWidth,h:e.offsetHeight||e.clientHeight}},parseSize:function(e){var t;if(typeof e=="string"){e=/^([0-9]+)([mgk]?)$/.exec(e.toLowerCase().replace(/[^0-9mkg]/g,""));t=e[2];e=+e[1];t=="g"&&(e*=1073741824);t=="m"&&(e*=1048576);t=="k"&&(e*=1024)}return e},xmlEncode:function(e){return e?(""+e).replace(s,function(e){return i[e]?"&"+i[e]+";":e}):e},toArray:function(e){var t,n=[];for(t=0;t<e.length;t++)n[t]=e[t];return n},inArray:function(e,t){if(t){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n}return-1},addI18n:function(e){return h.extend(n,e)},translate:function(e){return n[e]||e},isEmptyObj:function(e){if(e===o)return!0;for(var t in e)return!1;return!0},hasClass:function(e,t){var n;if(e.className=="")return!1;n=new RegExp("(^|\\s+)"+t+"(\\s+|$)");return n.test(e.className)},addClass:function(e,t){h.hasClass(e,t)||(e.className=e.className==""?t:e.className.replace(/\s+$/,"")+" "+t)},removeClass:function(e,t){var n=new RegExp("(^|\\s+)"+t+"(\\s+|$)");e.className=e.className.replace(n,function(e,t,n){return t===" "&&n===" "?" ":""})},getStyle:function(e,t){if(e.currentStyle)return e.currentStyle[t];if(window.getComputedStyle)return window.getComputedStyle(e,null)[t]},addEvent:function(e,t,n){var r,i,s,u;u=arguments[3];t=t.toLowerCase();f===o&&(f="Plupload_"+h.guid());if(e.addEventListener){r=n;e.addEventListener(t,r,!1)}else if(e.attachEvent){r=function(){var e=window.event;e.target||(e.target=e.srcElement);e.preventDefault=l;e.stopPropagation=c;n(e)};e.attachEvent("on"+t,r)}e[f]===o&&(e[f]=h.guid());a.hasOwnProperty(e[f])||(a[e[f]]={});i=a[e[f]];i.hasOwnProperty(t)||(i[t]=[]);i[t].push({func:r,orig:n,key:u})},removeEvent:function(e,t){var n,r,i;typeof arguments[2]=="function"?r=arguments[2]:i=arguments[2];t=t.toLowerCase();if(!(e[f]&&a[e[f]]&&a[e[f]][t]))return;n=a[e[f]][t];for(var s=n.length-1;s>=0;s--)if(n[s].key===i||n[s].orig===r){e.removeEventListener?e.removeEventListener(t,n[s].func,!1):e.detachEvent&&e.detachEvent("on"+t,n[s].func);n[s].orig=null;n[s].func=null;n.splice(s,1);if(r!==o)break}n.length||delete a[e[f]][t];if(h.isEmptyObj(a[e[f]])){delete a[e[f]];try{delete e[f]}catch(u){e[f]=o}}},removeAllEvents:function(e){var t=arguments[1];if(e[f]===o||!e[f])return;h.each(a[e[f]],function(n,r){h.removeEvent(e,r,t)})}};h.Uploader=function(e){function f(){var e,t=0,n;if(this.state==h.STARTED){for(n=0;n<i.length;n++)if(!e&&i[n].status==h.QUEUED){e=i[n];e.status=h.UPLOADING;this.trigger("BeforeUpload",e)&&this.trigger("UploadFile",e)}else t++;if(t==i.length){this.stop();this.trigger("UploadComplete",i)}}}function l(){var e,t;r.reset();for(e=0;e<i.length;e++){t=i[e];if(t.size!==o){r.size+=t.size;r.loaded+=t.loaded}else r.size=o;t.status==h.DONE?r.uploaded++:t.status==h.FAILED?r.failed++:r.queued++}if(r.size===o)r.percent=i.length>0?Math.ceil(r.uploaded/i.length*100):0;else{r.bytesPerSec=Math.ceil(r.loaded/((+(new Date)-s||1)/1e3));r.percent=r.size>0?Math.ceil(r.loaded/r.size*100):0}}var n={},r,i=[],s,a=!1;r=new h.QueueProgress;e=h.extend({chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",filters:[]},e);h.extend(this,{state:h.STOPPED,runtime:"",features:{},files:i,settings:e,total:r,id:h.guid(),init:function(){function v(){var e=a[p++],t,r,i;if(e){t=e.getFeatures();r=n.settings.required_features;if(r){r=r.split(",");for(i=0;i<r.length;i++)if(!t[r[i]]){v();return}}e.init(n,function(r){if(r&&r.success){n.features=t;n.runtime=e.name;n.trigger("Init",{runtime:e.name});n.trigger("PostInit");n.refresh()}else v()})}else n.trigger("Error",{code:h.INIT_ERROR,message:h.translate("Init error.")})}var n=this,r,a,c,p=0,d;typeof e.preinit=="function"?e.preinit(n):h.each(e.preinit,function(e,t){n.bind(t,e)});e.page_url=e.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");/^(\w+:\/\/|\/)/.test(e.url)||(e.url=e.page_url+e.url);e.chunk_size=h.parseSize(e.chunk_size);e.max_file_size=h.parseSize(e.max_file_size);n.bind("FilesAdded",function(t,r){var s,a,f=0,l,c=e.filters;if(c&&c.length){l=[];h.each(c,function(e){h.each(e.extensions.split(/,/),function(e){/^\s*\*\s*$/.test(e)?l.push("\\.*"):l.push("\\."+e.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})});l=new RegExp(l.join("|")+"$","i")}for(s=0;s<r.length;s++){a=r[s];a.loaded=0;a.percent=0;a.status=h.QUEUED;if(l&&!l.test(a.name)){t.trigger("Error",{code:h.FILE_EXTENSION_ERROR,message:h.translate("File extension error."),file:a});continue}if(a.size!==o&&a.size>e.max_file_size){t.trigger("Error",{code:h.FILE_SIZE_ERROR,message:h.translate("File size error."),file:a});continue}i.push(a);f++}if(!f)return!1;u(function(){n.trigger("QueueChanged");n.refresh()},1)});e.unique_names&&n.bind("UploadFile",function(e,t){var n=t.name.match(/\.([^.]+)$/),r="tmp";n&&(r=n[1]);t.target_name=t.id+"."+r});n.bind("UploadProgress",function(e,t){t.percent=t.size>0?Math.ceil(t.loaded/t.size*100):100;l()});n.bind("StateChanged",function(e){if(e.state==h.STARTED)s=+(new Date);else if(e.state==h.STOPPED)for(r=e.files.length-1;r>=0;r--)if(e.files[r].status==h.UPLOADING){e.files[r].status=h.QUEUED;l()}});n.bind("QueueChanged",l);n.bind("Error",function(e,t){if(t.file){t.file.status=h.FAILED;l();e.state==h.STARTED&&u(function(){f.call(n)},1)}});n.bind("FileUploaded",function(e,t){t.status=h.DONE;t.loaded=t.size;e.trigger("UploadProgress",t);u(function(){f.call(n)},1)});if(e.runtimes){a=[];d=e.runtimes.split(/\s?,\s?/);for(r=0;r<d.length;r++)t[d[r]]&&a.push(t[d[r]])}else a=t;v();typeof e.init=="function"?e.init(n):h.each(e.init,function(e,t){n.bind(t,e)})},refresh:function(){this.trigger("Refresh")},start:function(){if(i.length&&this.state!=h.STARTED){this.state=h.STARTED;this.trigger("StateChanged");f.call(this)}},stop:function(){if(this.state!=h.STOPPED){this.state=h.STOPPED;this.trigger("CancelUpload");this.trigger("StateChanged")}},disableBrowse:function(){a=arguments[0]!==o?arguments[0]:!0;this.trigger("DisableBrowse",a)},getFile:function(e){var t;for(t=i.length-1;t>=0;t--)if(i[t].id===e)return i[t]},removeFile:function(e){var t;for(t=i.length-1;t>=0;t--)if(i[t].id===e.id)return this.splice(t,1)[0]},splice:function(e,t){var n;n=i.splice(e===o?0:e,t===o?i.length:t);this.trigger("FilesRemoved",n);this.trigger("QueueChanged");return n},trigger:function(e){var t=n[e.toLowerCase()],r,i;if(t){i=Array.prototype.slice.call(arguments);i[0]=this;for(r=0;r<t.length;r++)if(t[r].func.apply(t[r].scope,i)===!1)return!1}return!0},hasEventListener:function(e){return!!n[e.toLowerCase()]},bind:function(e,t,r){var i;e=e.toLowerCase();i=n[e]||[];i.push({func:t,scope:r||this});n[e]=i},unbind:function(e){e=e.toLowerCase();var t=n[e],r,i=arguments[1];if(t){if(i!==o){for(r=t.length-1;r>=0;r--)if(t[r].func===i){t.splice(r,1);break}}else t=[];t.length||delete n[e]}},unbindAll:function(){var e=this;h.each(n,function(t,n){e.unbind(n)})},destroy:function(){this.stop();this.trigger("Destroy");this.unbindAll()}})};h.File=function(e,t,n){var r=this;r.id=e;r.name=t;r.size=n;r.loaded=0;r.percent=0;r.status=0};h.Runtime=function(){this.getFeatures=function(){};this.init=function(e,t){}};h.QueueProgress=function(){var e=this;e.size=0;e.loaded=0;e.uploaded=0;e.failed=0;e.queued=0;e.percent=0;e.bytesPerSec=0;e.reset=function(){e.size=e.loaded=e.uploaded=e.failed=e.queued=e.percent=e.bytesPerSec=0}};h.runtimes={};window.plupload=h})();(function(){if(window.google&&google.gears)return;var e=null;if(typeof GearsFactory!="undefined")e=new GearsFactory;else try{e=new ActiveXObject("Gears.Factory");e.getBuildInfo().indexOf("ie_mobile")!=-1&&e.privateSetGlobalObject(this)}catch(t){if(typeof navigator.mimeTypes!="undefined"&&navigator.mimeTypes["application/x-googlegears"]){e=document.createElement("object");e.style.display="none";e.width=0;e.height=0;e.type="application/x-googlegears";document.documentElement.appendChild(e)}}if(!e)return;window.google||(window.google={});google.gears||(google.gears={factory:e})})();(function(e,t,n,r){function s(e,t,n){var r,i,s,o;i=google.gears.factory.create("beta.canvas");try{i.decode(e);t.width||(t.width=i.width);t.height||(t.height=i.height);o=Math.min(width/i.width,height/i.height);if(o<1||o===1&&n==="image/jpeg"){i.resize(Math.round(i.width*o),Math.round(i.height*o));return t.quality?i.encode(n,{quality:t.quality/100}):i.encode(n)}}catch(u){}return e}var i={};n.runtimes.Gears=n.addRuntime("gears",{getFeatures:function(){return{dragdrop:!0,jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(r,o){function d(e){var t,s,o=[],u;for(s=0;s<e.length;s++){t=e[s];u=n.guid();i[u]=t.blob;o.push(new n.File(u,t.name,t.blob.length))}r.trigger("FilesAdded",o)}var u,l,h=!1;if(!e.google||!google.gears)return o({success:!1});try{u=google.gears.factory.create("beta.desktop")}catch(p){return o({success:!1})}r.bind("PostInit",function(){var e=r.settings,i=t.getElementById(e.drop_element);if(i){n.addEvent(i,"dragover",function(e){u.setDropEffect(e,"copy");e.preventDefault()},r.id);n.addEvent(i,"drop",function(e){var t=u.getDragData(e,"application/x-gears-files");t&&d(t.files);e.preventDefault()},r.id);i=0}n.addEvent(t.getElementById(e.browse_button),"click",function(t){var n=[],r,i,s;t.preventDefault();if(h)return;e:for(r=0;r<e.filters.length;r++){s=e.filters[r].extensions.split(",");for(i=0;i<s.length;i++){if(s[i]==="*"){n=[];break e}n.push("."+s[i])}}u.openFiles(d,{singleFile:!e.multi_selection,filter:n})},r.id)});r.bind("CancelUpload",function(){l.abort&&l.abort()});r.bind("UploadFile",function(e,t){function v(){function y(r){var i,s="----pluploadboundary"+n.guid(),o="--",u="\r\n",f,h;if(a){l.setRequestHeader("Content-Type","multipart/form-data; boundary="+s);i=google.gears.factory.create("beta.blobbuilder");n.each(n.extend(m,e.settings.multipart_params),function(e,t){i.append(o+s+u+'Content-Disposition: form-data; name="'+t+'"'+u+u);i.append(e+u)});h=n.mimeTypes[t.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream";i.append(o+s+u+'Content-Disposition: form-data; name="'+e.settings.file_data_name+'"; filename="'+t.name+'"'+u+"Content-Type: "+h+u+u);i.append(r);i.append(u+o+s+o+u);f=i.getAsBlob();p=f.length-r.length;r=f}l.send(r)}var s,a=e.settings.multipart,p=0,m={name:t.target_name||t.name},g=e.settings.url;if(t.status==n.DONE||t.status==n.FAILED||e.state==n.STOPPED)return;if(d){m.chunk=r;m.chunks=o}s=Math.min(u,t.size-r*u);a||(g=n.buildUrl(e.settings.url,m));l=google.gears.factory.create("beta.httprequest");l.open("POST",g);if(!a){l.setRequestHeader("Content-Disposition",'attachment; filename="'+t.name+'"');l.setRequestHeader("Content-Type","application/octet-stream")}n.each(e.settings.headers,function(e,t){l.setRequestHeader(t,e)});l.upload.onprogress=function(n){t.loaded=h+n.loaded-p;e.trigger("UploadProgress",t)};l.onreadystatechange=function(){var i;if(l.readyState==4&&e.state!==n.STOPPED)if(l.status==200){i={chunk:r,chunks:o,response:l.responseText,status:l.status};e.trigger("ChunkUploaded",t,i);if(i.cancelled){t.status=n.FAILED;return}h+=s;if(++r>=o){t.status=n.DONE;e.trigger("FileUploaded",t,{response:l.responseText,status:l.status})}else v()}else e.trigger("Error",{code:n.HTTP_ERROR,message:n.translate("HTTP Error."),file:t,chunk:r,chunks:o,status:l.status})};r<o&&y(i[t.id].slice(r*u,s))}var r=0,o,u,h=0,p=e.settings.resize,d;p&&/\.(png|jpg|jpeg)$/i.test(t.name)&&(i[t.id]=s(i[t.id],p,/\.png$/i.test(t.name)?"image/png":"image/jpeg"));t.size=i[t.id].length;u=e.settings.chunk_size;d=u>0;o=Math.ceil(t.size/u);if(!d){u=t.size;o=1}v()});r.bind("DisableBrowse",function(e,t){h=t});r.bind("Destroy",function(e){var r,i,s={browseButton:e.settings.browse_button,dropElm:e.settings.drop_element};for(r in s){i=t.getElementById(s[r]);i&&n.removeAllEvents(i,e.id)}});o({success:!0})}})})(window,document,plupload);(function(e,t,n,r){function o(e){var t,n=typeof e,i,s,u;if(e===r||e===null)return"null";if(n==="string"){t="\bb	t\nn\ff\rr\"\"''\\\\";return'"'+e.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,function(e,n){var r=t.indexOf(n);if(r+1)return"\\"+t.charAt(r+1);e=n.charCodeAt().toString(16);return"\\u"+"0000".substring(e.length)+e})+'"'}if(n=="object"){i=e.length!==r;t="";if(i){for(s=0;s<e.length;s++){t&&(t+=",");t+=o(e[s])}t="["+t+"]"}else{for(u in e)if(e.hasOwnProperty(u)){t&&(t+=",");t+=o(u)+":"+o(e[u])}t="{"+t+"}"}return t}return""+e}function u(e){var t=!1,n=null,r=null,i,s,o,u,a,f=0;try{try{r=new ActiveXObject("AgControl.AgControl");r.IsVersionSupported(e)&&(t=!0);r=null}catch(l){var c=navigator.plugins["Silverlight Plug-In"];if(c){i=c.description;i==="1.0.30226.2"&&(i="2.0.30226.2");s=i.split(".");while(s.length>3)s.pop();while(s.length<4)s.push(0);o=e.split(".");while(o.length>4)o.pop();do{u=parseInt(o[f],10);a=parseInt(s[f],10);f++}while(f<o.length&&u===a);u<=a&&!isNaN(u)&&(t=!0)}}}catch(h){t=!1}return t}var i={},s={};n.silverlight={trigger:function(e,t){var r=i[e],s,o;if(r){o=n.toArray(arguments).slice(1);o[0]="Silverlight:"+t;setTimeout(function(){r.trigger.apply(r,o)},0)}}};n.runtimes.Silverlight=n.addRuntime("silverlight",{getFeatures:function(){return{jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(r,l){function E(){return t.getElementById(r.id+"_silverlight").content.Upload}var p,v="",m=r.settings.filters,y,w=t.body;if(!u("2.0.31005.0")||e.opera&&e.opera.buildNumber){l({success:!1});return}s[r.id]=!1;i[r.id]=r;p=t.createElement("div");p.id=r.id+"_silverlight_container";n.extend(p.style,{position:"absolute",top:"0px",background:r.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100px",height:"100px",overflow:"hidden",opacity:r.settings.shim_bgcolor||t.documentMode>8?"":.01});p.className="plupload silverlight";if(r.settings.container){w=t.getElementById(r.settings.container);n.getStyle(w,"position")==="static"&&(w.style.position="relative")}w.appendChild(p);for(y=0;y<m.length;y++)v+=(v!=""?"|":"")+m[y].title+" | *."+m[y].extensions.replace(/,/g,";*.");p.innerHTML='<object id="'+r.id+'_silverlight" data="data:application/x-silverlight," type="application/x-silverlight-2" style="outline:none;" width="1024" height="1024"><param name="source" value="'+r.settings.silverlight_xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="id='+r.id+",filter="+v+",multiselect="+r.settings.multi_selection+'"/></object>';r.bind("Silverlight:Init",function(){var e,u={};if(s[r.id])return;s[r.id]=!0;r.bind("Silverlight:StartSelectFiles",function(t){e=[]});r.bind("Silverlight:SelectFile",function(t,r,i,s){var o;o=n.guid();u[o]=r;u[r]=o;e.push(new n.File(o,i,s))});r.bind("Silverlight:SelectSuccessful",function(){e.length&&r.trigger("FilesAdded",e)});r.bind("Silverlight:UploadChunkError",function(e,t,i,s,o){r.trigger("Error",{code:n.IO_ERROR,message:"IO Error.",details:o,file:e.getFile(u[t])})});r.bind("Silverlight:UploadFileProgress",function(e,t,r,i){var s=e.getFile(u[t]);if(s.status!=n.FAILED){s.size=i;s.loaded=r;e.trigger("UploadProgress",s)}});r.bind("Refresh",function(e){var r,i,s;r=t.getElementById(e.settings.browse_button);if(r){i=n.getPos(r,t.getElementById(e.settings.container));s=n.getSize(r);n.extend(t.getElementById(e.id+"_silverlight_container").style,{top:i.y+"px",left:i.x+"px",width:s.w+"px",height:s.h+"px"})}});r.bind("Silverlight:UploadChunkSuccessful",function(e,t,r,i,s){var o,a=e.getFile(u[t]);o={chunk:r,chunks:i,response:s};e.trigger("ChunkUploaded",a,o);a.status!=n.FAILED&&e.state!==n.STOPPED&&E().UploadNextChunk();if(r==i-1){a.status=n.DONE;e.trigger("FileUploaded",a,{response:s})}});r.bind("Silverlight:UploadSuccessful",function(e,t,r){var i=e.getFile(u[t]);i.status=n.DONE;e.trigger("FileUploaded",i,{response:r})});r.bind("FilesRemoved",function(e,t){var n;for(n=0;n<t.length;n++)E().RemoveFile(u[t[n].id])});r.bind("UploadFile",function(e,t){var r=e.settings,i=r.resize||{};E().UploadFile(u[t.id],e.settings.url,o({name:t.target_name||t.name,mime:n.mimeTypes[t.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:r.chunk_size,image_width:i.width,image_height:i.height,image_quality:i.quality||90,multipart:!!r.multipart,multipart_params:r.multipart_params||{},file_data_name:r.file_data_name,headers:r.headers}))});r.bind("CancelUpload",function(){E().CancelUpload()});r.bind("Silverlight:MouseEnter",function(e){var i,s;i=t.getElementById(r.settings.browse_button);s=e.settings.browse_button_hover;i&&s&&n.addClass(i,s)});r.bind("Silverlight:MouseLeave",function(e){var i,s;i=t.getElementById(r.settings.browse_button);s=e.settings.browse_button_hover;i&&s&&n.removeClass(i,s)});r.bind("Silverlight:MouseLeftButtonDown",function(e){var i,s;i=t.getElementById(r.settings.browse_button);s=e.settings.browse_button_active;if(i&&s){n.addClass(i,s);n.addEvent(t.body,"mouseup",function(){n.removeClass(i,s)})}});r.bind("Sliverlight:StartSelectFiles",function(e){var i,s;i=t.getElementById(r.settings.browse_button);s=e.settings.browse_button_active;i&&s&&n.removeClass(i,s)});r.bind("DisableBrowse",function(e,t){E().DisableBrowse(t)});r.bind("Destroy",function(e){var r;n.removeAllEvents(t.body,e.id);delete s[e.id];delete i[e.id];r=t.getElementById(e.id+"_silverlight_container");r&&w.removeChild(r)});l({success:!0})})}})})(window,document,plupload);(function(e,t,n,r){function o(){var e;try{e=navigator.plugins["Shockwave Flash"];e=e.description}catch(t){try{e=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(n){e="0.0"}}e=e.match(/\d+/g);return parseFloat(e[0]+"."+e[1])}var i={},s={};n.flash={trigger:function(e,t,n){setTimeout(function(){var r=i[e],s,o;r&&r.trigger("Flash:"+t,n)},0)}};n.runtimes.Flash=n.addRuntime("flash",{getFeatures:function(){return{jpgresize:!0,pngresize:!0,maxWidth:8091,maxHeight:8091,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(e,r){function p(){return t.getElementById(e.id+"_flash")}function v(){if(l++>5e3){r({success:!1});return}s[e.id]===!1&&setTimeout(v,1)}var u,f,l=0,h=t.body;if(o()<10){r({success:!1});return}s[e.id]=!1;i[e.id]=e;u=t.getElementById(e.settings.browse_button);f=t.createElement("div");f.id=e.id+"_flash_container";n.extend(f.style,{position:"absolute",top:"0px",background:e.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100%",height:"100%"});f.className="plupload flash";if(e.settings.container){h=t.getElementById(e.settings.container);n.getStyle(h,"position")==="static"&&(h.style.position="relative")}h.appendChild(f);(function(){var r,i;r='<object id="'+e.id+'_flash" type="application/x-shockwave-flash" data="'+e.settings.flash_swf_url+'" ';n.ua.ie&&(r+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ');r+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+e.settings.flash_swf_url+'" /><param name="flashvars" value="id='+escape(e.id)+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>';if(n.ua.ie){i=t.createElement("div");f.appendChild(i);i.outerHTML=r;i=null}else f.innerHTML=r})();v();u=f=null;e.bind("Destroy",function(e){var r;n.removeAllEvents(t.body,e.id);delete s[e.id];delete i[e.id];r=t.getElementById(e.id+"_flash_container");r&&h.removeChild(r)});e.bind("Flash:Init",function(){var i={},o;try{p().setFileFilters(e.settings.filters,e.settings.multi_selection)}catch(u){r({success:!1});return}if(s[e.id])return;s[e.id]=!0;e.bind("UploadFile",function(t,r){var s=t.settings,o=e.settings.resize||{};p().uploadFile(i[r.id],s.url,{name:r.target_name||r.name,mime:n.mimeTypes[r.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:s.chunk_size,width:o.width,height:o.height,quality:o.quality,multipart:s.multipart,multipart_params:s.multipart_params||{},file_data_name:s.file_data_name,format:/\.(jpg|jpeg)$/i.test(r.name)?"jpg":"png",headers:s.headers,urlstream_upload:s.urlstream_upload})});e.bind("CancelUpload",function(){p().cancelUpload()});e.bind("Flash:UploadProcess",function(e,t){var r=e.getFile(i[t.id]);if(r.status!=n.FAILED){r.loaded=t.loaded;r.size=t.size;e.trigger("UploadProgress",r)}});e.bind("Flash:UploadChunkComplete",function(e,t){var r,s=e.getFile(i[t.id]);r={chunk:t.chunk,chunks:t.chunks,response:t.text};e.trigger("ChunkUploaded",s,r);s.status!==n.FAILED&&e.state!==n.STOPPED&&p().uploadNextChunk();if(t.chunk==t.chunks-1){s.status=n.DONE;e.trigger("FileUploaded",s,{response:t.text})}});e.bind("Flash:SelectFiles",function(t,r){var s,o,u=[],a;for(o=0;o<r.length;o++){s=r[o];a=n.guid();i[a]=s.id;i[s.id]=a;u.push(new n.File(a,s.name,s.size))}u.length&&e.trigger("FilesAdded",u)});e.bind("Flash:SecurityError",function(t,r){e.trigger("Error",{code:n.SECURITY_ERROR,message:n.translate("Security error."),details:r.message,file:e.getFile(i[r.id])})});e.bind("Flash:GenericError",function(t,r){e.trigger("Error",{code:n.GENERIC_ERROR,message:n.translate("Generic error."),details:r.message,file:e.getFile(i[r.id])})});e.bind("Flash:IOError",function(t,r){e.trigger("Error",{code:n.IO_ERROR,message:n.translate("IO error."),details:r.message,file:e.getFile(i[r.id])})});e.bind("Flash:ImageError",function(t,r){e.trigger("Error",{code:parseInt(r.code,10),message:n.translate("Image error."),file:e.getFile(i[r.id])})});e.bind("Flash:StageEvent:rollOver",function(r){var i,s;i=t.getElementById(e.settings.browse_button);s=r.settings.browse_button_hover;i&&s&&n.addClass(i,s)});e.bind("Flash:StageEvent:rollOut",function(r){var i,s;i=t.getElementById(e.settings.browse_button);s=r.settings.browse_button_hover;i&&s&&n.removeClass(i,s)});e.bind("Flash:StageEvent:mouseDown",function(r){var i,s;i=t.getElementById(e.settings.browse_button);s=r.settings.browse_button_active;if(i&&s){n.addClass(i,s);n.addEvent(t.body,"mouseup",function(){n.removeClass(i,s)},r.id)}});e.bind("Flash:StageEvent:mouseUp",function(r){var i,s;i=t.getElementById(e.settings.browse_button);s=r.settings.browse_button_active;i&&s&&n.removeClass(i,s)});e.bind("Flash:ExifData",function(t,n){e.trigger("ExifData",e.getFile(i[n.id]),n.data)});e.bind("Flash:GpsData",function(t,n){e.trigger("GpsData",e.getFile(i[n.id]),n.data)});e.bind("QueueChanged",function(t){e.refresh()});e.bind("FilesRemoved",function(e,t){var n;for(n=0;n<t.length;n++)p().removeFile(i[t[n].id])});e.bind("StateChanged",function(t){e.refresh()});e.bind("Refresh",function(r){var i,s,o;p().setFileFilters(e.settings.filters,e.settings.multi_selection);i=t.getElementById(r.settings.browse_button);if(i){s=n.getPos(i,t.getElementById(r.settings.container));o=n.getSize(i);n.extend(t.getElementById(r.id+"_flash_container").style,{top:s.y+"px",left:s.x+"px",width:o.w+"px",height:o.h+"px"})}});e.bind("DisableBrowse"
,function(e,t){p().disableBrowse(t)});r({success:!0})})}})})(window,document,plupload);(function(e){e.runtimes.BrowserPlus=e.addRuntime("browserplus",{getFeatures:function(){return{dragdrop:!0,jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(t,n){function u(n){var r,s,o=[],u,f;for(s=0;s<n.length;s++){u=n[s];f=e.guid();i[f]=u;o.push(new e.File(f,u.name,u.size))}s&&t.trigger("FilesAdded",o)}function f(){var f=!1;t.bind("PostInit",function(){function h(e,t){r.DragAndDrop.AddDropTarget({id:e},function(n){r.DragAndDrop.AttachCallbacks({id:e,hover:function(e){!e&&t&&t()},drop:function(e){t&&t();u(e)}},function(){})})}function p(){document.getElementById(o).style.top="-1000px"}var n,i=s.drop_element,o=t.id+"_droptarget",l=document.getElementById(i),c;if(l)if(document.attachEvent&&/MSIE/gi.test(navigator.userAgent)){n=document.createElement("div");n.setAttribute("id",o);e.extend(n.style,{position:"absolute",top:"-1000px",background:"red",filter:"alpha(opacity=0)",opacity:0});document.body.appendChild(n);e.addEvent(l,"dragenter",function(t){var n,r;n=document.getElementById(i);r=e.getPos(n);e.extend(document.getElementById(o).style,{top:r.y+"px",left:r.x+"px",width:n.offsetWidth+"px",height:n.offsetHeight+"px"})});h(o,p)}else h(i);e.addEvent(document.getElementById(s.browse_button),"click",function(t){var n=[],i,o,l=s.filters,c,h;t.preventDefault();if(f)return;e:for(i=0;i<l.length;i++){c=l[i].extensions.split(",");for(o=0;o<c.length;o++){if(c[o]==="*"){n=[];break e}h=e.mimeTypes[c[o]];h&&e.inArray(h,n)===-1&&n.push(e.mimeTypes[c[o]])}}r.FileBrowse.OpenBrowseDialog({mimeTypes:n},function(e){e.success&&u(e.value)})});l=n=null});t.bind("CancelUpload",function(){r.Uploader.cancel({},function(){})});t.bind("DisableBrowse",function(e,t){f=t});t.bind("UploadFile",function(t,n){function d(i,s){var o;if(n.status==e.FAILED)return;u.name=n.target_name||n.name;if(f){u.chunk=""+i;u.chunks=""+s}o=p.shift();r.Uploader.upload({url:t.settings.url,files:{file:o},cookies:document.cookies,postvars:e.extend(u,t.settings.multipart_params),progressCallback:function(e){var r,s=0;l[i]=parseInt(e.filePercent*o.size/100,10);for(r=0;r<l.length;r++)s+=l[r];n.loaded=s;t.trigger("UploadProgress",n)}},function(r){var o,u;if(r.success){o=r.value.statusCode;f&&t.trigger("ChunkUploaded",n,{chunk:i,chunks:s,response:r.value.body,status:o});if(p.length>0)d(++i,s);else{n.status=e.DONE;t.trigger("FileUploaded",n,{response:r.value.body,status:o});o>=400&&t.trigger("Error",{code:e.HTTP_ERROR,message:e.translate("HTTP Error."),file:n,status:o})}}else t.trigger("Error",{code:e.GENERIC_ERROR,message:e.translate("Generic Error."),file:n,details:r.error})})}function v(e){n.size=e.size;if(f)r.FileAccess.chunk({file:e,chunkSize:f},function(e){if(e.success){var t=e.value,n=t.length;l=Array(n);for(var r=0;r<n;r++){l[r]=0;p.push(t[r])}d(0,n)}});else{l=Array(1);p.push(e);d(0,1)}}var s=i[n.id],u={},f=t.settings.chunk_size,l,p=[];o&&/\.(png|jpg|jpeg)$/i.test(n.name)?BrowserPlus.ImageAlter.transform({file:s,quality:o.quality||90,actions:[{scale:{maxwidth:o.width,maxheight:o.height}}]},function(e){e.success&&v(e.value.file)}):v(s)});n({success:!0})}var r=window.BrowserPlus,i={},s=t.settings,o=s.resize;r?r.init(function(e){var t=[{service:"Uploader",version:"3"},{service:"DragAndDrop",version:"1"},{service:"FileBrowse",version:"1"},{service:"FileAccess",version:"2"}];o&&t.push({service:"ImageAlter",version:"4"});e.success?r.require({services:t},function(e){e.success?f():n()}):n()}):n()}})})(plupload);(function(e,t,n,r){function u(t,n){var r;if(!("FileReader"in e))return n(t.getAsDataURL());r=new FileReader;r.readAsDataURL(t);r.onload=function(){n(r.result)}}function a(t,n){var r;if(!("FileReader"in e))return n(t.getAsBinary());r=new FileReader;r.readAsBinaryString(t);r.onload=function(){n(r.result)}}function f(e,n,r,i){var o,a,f,l,p=this;u(s[e.id],function(s){o=t.createElement("canvas");o.style.display="none";t.body.appendChild(o);a=o.getContext("2d");f=new Image;f.onerror=f.onabort=function(){i({success:!1})};f.onload=function(){var t,u,d,m,g;n.width||(n.width=f.width);n.height||(n.height=f.height);l=Math.min(n.width/f.width,n.height/f.height);if(l<1||l===1&&r==="image/jpeg"){t=Math.round(f.width*l);u=Math.round(f.height*l);o.width=t;o.height=u;a.drawImage(f,0,0,t,u);if(r==="image/jpeg"){m=new c(atob(s.substring(s.indexOf("base64,")+7)));if(m.headers&&m.headers.length){g=new h;if(g.init(m.get("exif")[0])){g.setExif("PixelXDimension",t);g.setExif("PixelYDimension",u);m.set("exif",g.getBinary());p.hasEventListener("ExifData")&&p.trigger("ExifData",e,g.EXIF());p.hasEventListener("GpsData")&&p.trigger("GpsData",e,g.GPS())}}if(n.quality)try{s=o.toDataURL(r,n.quality/100)}catch(y){s=o.toDataURL(r)}}else s=o.toDataURL(r);s=s.substring(s.indexOf("base64,")+7);s=atob(s);if(m&&m.headers&&m.headers.length){s=m.restore(s);m.purge()}o.parentNode.removeChild(o);i({success:!0,data:s})}else i({success:!1})};f.src=s})}function l(){function n(n,r){var i=e?0:-8*(r-1),s=0,o;for(o=0;o<r;o++)s|=t.charCodeAt(n+o)<<Math.abs(i+o*8);return s}function i(e,n,r){var r=arguments.length===3?r:t.length-n-1;t=t.substr(0,n)+e+t.substr(r+n)}function s(t,n,r){var s="",o=e?0:-8*(r-1),u;for(u=0;u<r;u++)s+=String.fromCharCode(n>>Math.abs(o+u*8)&255);i(s,t,r)}var e=!1,t;return{II:function(t){if(t===r)return e;e=t},init:function(n){e=!1;t=n},SEGMENT:function(e,n,r){switch(arguments.length){case 1:return t.substr(e,t.length-e-1);case 2:return t.substr(e,n);case 3:i(r,e,n);break;default:return t}},BYTE:function(e){return n(e,1)},SHORT:function(e){return n(e,2)},LONG:function(e,t){if(t===r)return n(e,4);s(e,t,4)},SLONG:function(e){var t=n(e,4);return t>2147483647?t-4294967296:t},STRING:function(e,t){var r="";for(t+=e;e<t;e++)r+=String.fromCharCode(n(e,1));return r}}}function c(e){var t={65505:{app:"EXIF",name:"APP1",signature:"Exif\0"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\0"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\0"}},n=[],i,s,o=r,u=0,a;i=new l;i.init(e);if(i.SHORT(0)!==65496)return;s=2;a=Math.min(1048576,e.length);while(s<=a){o=i.SHORT(s);if(o>=65488&&o<=65495){s+=2;continue}if(o===65498||o===65497)break;u=i.SHORT(s+2)+2;t[o]&&i.STRING(s+4,t[o].signature.length)===t[o].signature&&n.push({hex:o,app:t[o].app.toUpperCase(),name:t[o].name.toUpperCase(),start:s,length:u,segment:i.SEGMENT(s,u)});s+=u}i.init(null);return{headers:n,restore:function(e){i.init(e);var t=new c(e);if(!t.headers)return!1;for(var r=t.headers.length;r>0;r--){var o=t.headers[r-1];i.SEGMENT(o.start,o.length,"")}t.purge();s=i.SHORT(2)==65504?4+i.SHORT(4):2;for(var r=0,u=n.length;r<u;r++){i.SEGMENT(s,0,n[r].segment);s+=n[r].length}return i.SEGMENT()},get:function(e){var t=[];for(var r=0,i=n.length;r<i;r++)n[r].app===e.toUpperCase()&&t.push(n[r].segment);return t},set:function(e,t){var r=[];typeof t=="string"?r.push(t):r=t;for(var i=ii=0,s=n.length;i<s;i++){if(n[i].app===e.toUpperCase()){n[i].segment=r[ii];n[i].length=r[ii].length;ii++}if(ii>=r.length)break}},purge:function(){n=[];i.init(null)}}}function h(){function u(t,n){var i=e.SHORT(t),u,a,f,l,c,h,p,d,v=[],m={};for(u=0;u<i;u++){p=h=t+12*u+2;f=n[e.SHORT(p)];if(f===r)continue;l=e.SHORT(p+=2);c=e.LONG(p+=2);p+=4;v=[];switch(l){case 1:case 7:c>4&&(p=e.LONG(p)+s.tiffHeader);for(a=0;a<c;a++)v[a]=e.BYTE(p+a);break;case 2:c>4&&(p=e.LONG(p)+s.tiffHeader);m[f]=e.STRING(p,c-1);continue;case 3:c>2&&(p=e.LONG(p)+s.tiffHeader);for(a=0;a<c;a++)v[a]=e.SHORT(p+a*2);break;case 4:c>1&&(p=e.LONG(p)+s.tiffHeader);for(a=0;a<c;a++)v[a]=e.LONG(p+a*4);break;case 5:p=e.LONG(p)+s.tiffHeader;for(a=0;a<c;a++)v[a]=e.LONG(p+a*4)/e.LONG(p+a*4+4);break;case 9:p=e.LONG(p)+s.tiffHeader;for(a=0;a<c;a++)v[a]=e.SLONG(p+a*4);break;case 10:p=e.LONG(p)+s.tiffHeader;for(a=0;a<c;a++)v[a]=e.SLONG(p+a*4)/e.SLONG(p+a*4+4);break;default:continue}d=c==1?v[0]:v;o.hasOwnProperty(f)&&typeof d!="object"?m[f]=o[f][d]:m[f]=d}return m}function a(){var n=r,i=s.tiffHeader;e.II(e.SHORT(i)==18761);if(e.SHORT(i+=2)!==42)return!1;s.IFD0=s.tiffHeader+e.LONG(i+=2);n=u(s.IFD0,t.tiff);s.exifIFD="ExifIFDPointer"in n?s.tiffHeader+n.ExifIFDPointer:r;s.gpsIFD="GPSInfoIFDPointer"in n?s.tiffHeader+n.GPSInfoIFDPointer:r;return!0}function f(n,r,o){var u,a,f,l=0;if(typeof r=="string"){var c=t[n.toLowerCase()];for(hex in c)if(c[hex]===r){r=hex;break}}u=s[n.toLowerCase()+"IFD"];a=e.SHORT(u);for(i=0;i<a;i++){f=u+12*i+2;if(e.SHORT(f)==r){l=f+8;break}}if(!l)return!1;e.LONG(l,o);return!0}var e,t,s={},o;e=new l;t={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}};o={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}};return{init:function(t){s={tiffHeader:10};if(t===r||!t.length)return!1;e.init(t);return e.SHORT(0)===65505&&e.STRING(4,5).toUpperCase()==="EXIF\0"?a():!1},EXIF:function(){var e;e=u(s.exifIFD,t.exif);if(e.ExifVersion&&n.typeOf(e.ExifVersion)==="array"){for(var r=0,i="";r<e.ExifVersion.length;r++)i+=String.fromCharCode(e.ExifVersion[r]);e.ExifVersion=i}return e},GPS:function(){var e;e=u(s.gpsIFD,t.gps);e.GPSVersionID&&(e.GPSVersionID=e.GPSVersionID.join("."));return e},setExif:function(e,t){return e!=="PixelXDimension"&&e!=="PixelYDimension"?!1:f("exif",e,t)},getBinary:function(){return e.SEGMENT()}}}var s={},o;n.runtimes.Html5=n.addRuntime("html5",{getFeatures:function(){var r,i,s,u,a,f;i=s=a=f=!1;if(e.XMLHttpRequest){r=new XMLHttpRequest;s=!!r.upload;i=!!r.sendAsBinary||!!r.upload}if(i){u=!!(r.sendAsBinary||e.Uint8Array&&e.ArrayBuffer);a=!(!File||!File.prototype.getAsDataURL&&!e.FileReader||!u);f=!!File&&!!(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)}o=n.ua.safari&&n.ua.windows;return{html5:i,dragdrop:function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}(),jpgresize:a,pngresize:a,multipart:a||!!e.FileReader||!!e.FormData,canSendBinary:u,cantSendBlobInFormData:!!(n.ua.gecko&&e.FormData&&e.FileReader&&!FileReader.prototype.readAsArrayBuffer),progress:s,chunks:f,multi_selection:!n.ua.safari||!n.ua.windows,triggerDialog:n.ua.gecko&&e.FormData||n.ua.webkit}},init:function(r,i){function c(e){var t,i,o=[],u,a={};for(i=0;i<e.length;i++){t=e[i];if(a[t.name])continue;a[t.name]=!0;u=n.guid();s[u]=t;o.push(new n.File(u,t.fileName||t.name,t.fileSize||t.size))}o.length&&r.trigger("FilesAdded",o)}var u,l;u=this.getFeatures();if(!u.html5){i({success:!1});return}r.bind("Init",function(e){var i,s,o=[],u,a,f=e.settings.filters,l,h,d=t.body,v;i=t.createElement("div");i.id=e.id+"_html5_container";n.extend(i.style,{position:"absolute",background:r.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:r.settings.shim_bgcolor?"":0});i.className="plupload html5";if(r.settings.container){d=t.getElementById(r.settings.container);n.getStyle(d,"position")==="static"&&(d.style.position="relative")}d.appendChild(i);e:for(u=0;u<f.length;u++){l=f[u].extensions.split(/,/);for(a=0;a<l.length;a++){if(l[a]==="*"){o=[];break e}h=n.mimeTypes[l[a]];h&&n.inArray(h,o)===-1&&o.push(h)}}i.innerHTML='<input id="'+r.id+'_html5"  style="font-size:999px" type="file" accept="'+o.join(",")+'" '+(r.settings.multi_selection&&r.features.multi_selection?'multiple="multiple"':"")+" />";i.scrollTop=100;v=t.getElementById(r.id+"_html5");e.features.triggerDialog?n.extend(v.style,{position:"absolute",width:"100%",height:"100%"}):n.extend(v.style,{cssFloat:"right",styleFloat:"right"});v.onchange=function(){c(this.files);this.value=""};s=t.getElementById(e.settings.browse_button);if(s){var m=e.settings.browse_button_hover,g=e.settings.browse_button_active,y=e.features.triggerDialog?s:i;if(m){n.addEvent(y,"mouseover",function(){n.addClass(s,m)},e.id);n.addEvent(y,"mouseout",function(){n.removeClass(s,m)},e.id)}if(g){n.addEvent(y,"mousedown",function(){n.addClass(s,g)},e.id);n.addEvent(t.body,"mouseup",function(){n.removeClass(s,g)},e.id)}e.features.triggerDialog&&n.addEvent(s,"click",function(n){var r=t.getElementById(e.id+"_html5");r&&!r.disabled&&r.click();n.preventDefault()},e.id)}});r.bind("PostInit",function(){var e=t.getElementById(r.settings.drop_element);if(e){if(o){n.addEvent(e,"dragenter",function(i){var s,o,u;s=t.getElementById(r.id+"_drop");if(!s){s=t.createElement("input");s.setAttribute("type","file");s.setAttribute("id",r.id+"_drop");s.setAttribute("multiple","multiple");n.addEvent(s,"change",function(){c(this.files);n.removeEvent(s,"change",r.id);s.parentNode.removeChild(s)},r.id);e.appendChild(s)}o=n.getPos(e,t.getElementById(r.settings.container));u=n.getSize(e);n.getStyle(e,"position")==="static"&&n.extend(e.style,{position:"relative"});n.extend(s.style,{position:"absolute",display:"block",top:0,left:0,width:u.w+"px",height:u.h+"px",opacity:0})},r.id);return}n.addEvent(e,"dragover",function(e){e.preventDefault()},r.id);n.addEvent(e,"drop",function(e){var t=e.dataTransfer;t&&t.files&&c(t.files);e.preventDefault()},r.id)}});r.bind("Refresh",function(e){var i,s,o,u,a;i=t.getElementById(r.settings.browse_button);if(i){s=n.getPos(i,t.getElementById(e.settings.container));o=n.getSize(i);u=t.getElementById(r.id+"_html5_container");n.extend(u.style,{top:s.y+"px",left:s.x+"px",width:o.w+"px",height:o.h+"px"});if(r.features.triggerDialog){n.getStyle(i,"position")==="static"&&n.extend(i.style,{position:"relative"});a=parseInt(n.getStyle(i,"z-index"),10);isNaN(a)&&(a=0);n.extend(i.style,{zIndex:a});n.extend(u.style,{zIndex:a-1})}}});r.bind("DisableBrowse",function(e,n){var r=t.getElementById(e.id+"_html5");r&&(r.disabled=n)});r.bind("CancelUpload",function(){l&&l.abort&&l.abort()});r.bind("UploadFile",function(t,r){function h(e,t,n){var r;if(!File.prototype.slice)return(r=File.prototype.webkitSlice||File.prototype.mozSlice)?r.call(e,t,n):null;try{e.slice();return e.slice(t,n)}catch(i){return e.slice(t,n-t)}}function p(s){function c(){function S(i){var s=0,f="----pluploadboundary"+n.guid(),h,d="--",v="\r\n",S="";l=new XMLHttpRequest;l.upload&&(l.upload.onprogress=function(e){r.loaded=Math.min(r.size,a+e.loaded-s);t.trigger("UploadProgress",r)});l.onreadystatechange=function(){var e,s;if(l.readyState==4&&t.state!==n.STOPPED){try{e=l.status}catch(u){e=0}if(e>=400)t.trigger("Error",{code:n.HTTP_ERROR,message:n.translate("HTTP Error."),file:r,status:e});else{if(m){s={chunk:o,chunks:m,response:l.responseText,status:e};t.trigger("ChunkUploaded",r,s);a+=b;if(s.cancelled){r.status=n.FAILED;return}r.loaded=Math.min(r.size,(o+1)*y)}else r.loaded=r.size;t.trigger("UploadProgress",r);i=p=h=S=null;if(!m||++o>=m){r.status=n.DONE;t.trigger("FileUploaded",r,{response:l.responseText,status:e})}else c()}}};if(t.settings.multipart&&u.multipart){g.name=r.target_name||r.name;l.open("post",E,!0);n.each(t.settings.headers,function(e,t){l.setRequestHeader(t,e)});if(typeof i!="string"&&!!e.FormData){h=new FormData;n.each(n.extend(g,t.settings.multipart_params),function(e,t){h.append(t,e)});h.append(t.settings.file_data_name,i);l.send(h);return}if(typeof i=="string"){l.setRequestHeader("Content-Type","multipart/form-data; boundary="+f);n.each(n.extend(g,t.settings.multipart_params),function(e,t){S+=d+f+v+'Content-Disposition: form-data; name="'+t+'"'+v+v;S+=unescape(encodeURIComponent(e))+v});w=n.mimeTypes[r.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream";S+=d+f+v+'Content-Disposition: form-data; name="'+t.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(r.name))+'"'+v+"Content-Type: "+w+v+v+i+v+d+f+d+v;s=S.length-i.length;i=S;if(l.sendAsBinary)l.sendAsBinary(i);else if(u.canSendBinary){var x=new Uint8Array(i.length);for(var T=0;T<i.length;T++)x[T]=i.charCodeAt(T)&255;l.send(x.buffer)}return}}E=n.buildUrl(t.settings.url,n.extend(g,t.settings.multipart_params));l.open("post",E,!0);l.setRequestHeader("Content-Type","application/octet-stream");n.each(t.settings.headers,function(e,t){l.setRequestHeader(t,e)});l.send(i)}var p,d,m,g,y,b,w,E=t.settings.url;if(r.status==n.DONE||r.status==n.FAILED||t.state==n.STOPPED)return;g={name:r.target_name||r.name};if(i.chunk_size&&r.size>i.chunk_size&&(u.chunks||typeof s=="string")){y=i.chunk_size;m=Math.ceil(r.size/y);b=Math.min(y,r.size-o*y);typeof s=="string"?p=s.substring(o*y,o*y+b):p=h(s,o*y,o*y+b);g.chunk=o;g.chunks=m}else{b=r.size;p=s}if(t.settings.multipart&&u.multipart&&typeof p!="string"&&f&&u.cantSendBlobInFormData&&u.chunks&&t.settings.chunk_size){f.onload=function(){S(f.result)};f.readAsBinaryString(p)}else S(p)}var o=0,a=0,f="FileReader"in e?new FileReader:null;c()}var i=t.settings,o,c;o=s[r.id];u.jpgresize&&t.settings.resize&&/\.(png|jpg|jpeg)$/i.test(r.name)?f.call(t,r,t.settings.resize,/\.png$/i.test(r.name)?"image/png":"image/jpeg",function(e){if(e.success){r.size=e.data.length;p(e.data)}else u.chunks?p(o):a(o,p)}):!u.chunks&&u.jpgresize?a(o,p):p(o)});r.bind("Destroy",function(e){var r,i,s=t.body,o={inputContainer:e.id+"_html5_container",inputFile:e.id+"_html5",browseButton:e.settings.browse_button,dropElm:e.settings.drop_element};for(r in o){i=t.getElementById(o[r]);i&&n.removeAllEvents(i,e.id)}n.removeAllEvents(t.body,e.id);e.settings.container&&(s=t.getElementById(e.settings.container));s.removeChild(t.getElementById(o.inputContainer))});i({success:!0})}})})(window,document,plupload);(function(e,t,n,r){function i(e){return t.getElementById(e)}n.runtimes.Html4=n.addRuntime("html4",{getFeatures:function(){return{multipart:!0,triggerDialog:n.ua.gecko&&e.FormData||n.ua.webkit}},init:function(r,s){r.bind("Init",function(s){function T(){var e,u,l,c;p=n.guid();v.push(p);e=t.createElement("form");e.setAttribute("id","form_"+p);e.setAttribute("method","post");e.setAttribute("enctype","multipart/form-data");e.setAttribute("encoding","multipart/form-data");e.setAttribute("target",s.id+"_iframe");e.style.position="absolute";u=t.createElement("input");u.setAttribute("id","input_"+p);u.setAttribute("type","file");u.setAttribute("accept",g);u.setAttribute("size",1);c=i(s.settings.browse_button);s.features.triggerDialog&&c&&n.addEvent(i(s.settings.browse_button),"click",function(e){u.disabled||u.click();e.preventDefault()},s.id);n.extend(u.style,{width:"100%",height:"100%",opacity:0,fontSize:"99px",cursor:"pointer"});n.extend(e.style,{overflow:"hidden"});l=s.settings.shim_bgcolor;l&&(e.style.background=l);m&&n.extend(u.style,{filter:"alpha(opacity=0)"});n.addEvent(u,"change",function(t){var o=t.target,a,l=[],h;if(o.value){i("form_"+p).style.top="-1048575px";a=o.value.replace(/\\/g,"/");a=a.substring(a.length,a.lastIndexOf("/")+1);l.push(new n.File(p,a));s.features.triggerDialog?n.removeEvent(c,"click",s.id):n.removeAllEvents(e,s.id);n.removeEvent(u,"change",s.id);T();l.length&&r.trigger("FilesAdded",l)}},s.id);e.appendChild(u);o.appendChild(e);s.refresh()}function N(){var r=t.createElement("div");r.innerHTML='<iframe id="'+s.id+'_iframe" name="'+s.id+'_iframe" src="'+l+':&quot;&quot;" style="display:none"></iframe>';u=r.firstChild;o.appendChild(u);n.addEvent(u,"load",function(t){var r=t.target,i,o;if(!c)return;try{i=r.contentWindow.document||r.contentDocument||e.frames[r.id].document}catch(u){s.trigger("Error",{code:n.SECURITY_ERROR,message:n.translate("Security error."),file:c});return}o=i.body.innerHTML;if(o){c.status=n.DONE;c.loaded=1025;c.percent=100;s.trigger("UploadProgress",c);s.trigger("FileUploaded",c,{response:o})}},s.id)}var o=t.body,u,l="javascript",c,h,p,v=[],m=/MSIE/.test(navigator.userAgent),g=[],y=s.settings.filters,w,E,S,x;e:for(w=0;w<y.length;w++){E=y[w].extensions.split(/,/);for(x=0;x<E.length;x++){if(E[x]==="*"){g=[];break e}S=n.mimeTypes[E[x]];S&&n.inArray(S,g)===-1&&g.push(S)}}g=g.join(",");if(s.settings.container){o=i(s.settings.container);n.getStyle(o,"position")==="static"&&(o.style.position="relative")}s.bind("UploadFile",function(e,r){var s,o;if(r.status==n.DONE||r.status==n.FAILED||e.state==n.STOPPED)return;s=i("form_"+r.id);o=i("input_"+r.id);o.setAttribute("name",e.settings.file_data_name);s.setAttribute("action",e.settings.url);n.each(n.extend({name:r.target_name||r.name},e.settings.multipart_params),function(e,r){var i=t.createElement("input");n.extend(i,{type:"hidden",name:r,value:e});s.insertBefore(i,s.firstChild)});c=r;i("form_"+p).style.top="-1048575px";s.submit()});s.bind("FileUploaded",function(e){e.refresh()});s.bind("StateChanged",function(t){t.state==n.STARTED?N():t.state==n.STOPPED&&e.setTimeout(function(){n.removeEvent(u,"load",t.id);u.parentNode&&u.parentNode.removeChild(u)},0);n.each(t.files,function(e,t){if(e.status===n.DONE||e.status===n.FAILED){var r=i("form_"+e.id);r&&r.parentNode.removeChild(r)}})});s.bind("Refresh",function(e){var r,s,o,u,f,l,c,h,d;r=i(e.settings.browse_button);if(r){f=n.getPos(r,i(e.settings.container));l=n.getSize(r);c=i("form_"+p);h=i("input_"+p);n.extend(c.style,{top:f.y+"px",left:f.x+"px",width:l.w+"px",height:l.h+"px"});if(e.features.triggerDialog){n.getStyle(r,"position")==="static"&&n.extend(r.style,{position:"relative"});d=parseInt(r.style.zIndex,10);isNaN(d)&&(d=0);n.extend(r.style,{zIndex:d});n.extend(c.style,{zIndex:d-1})}o=e.settings.browse_button_hover;u=e.settings.browse_button_active;s=e.features.triggerDialog?r:c;if(o){n.addEvent(s,"mouseover",function(){n.addClass(r,o)},e.id);n.addEvent(s,"mouseout",function(){n.removeClass(r,o)},e.id)}if(u){n.addEvent(s,"mousedown",function(){n.addClass(r,u)},e.id);n.addEvent(t.body,"mouseup",function(){n.removeClass(r,u)},e.id)}}});r.bind("FilesRemoved",function(e,t){var n,r;for(n=0;n<t.length;n++){r=i("form_"+t[n].id);r&&r.parentNode.removeChild(r)}});r.bind("DisableBrowse",function(e,n){var r=t.getElementById("input_"+p);r&&(r.disabled=n)});r.bind("Destroy",function(e){var r,s,u,f={inputContainer:"form_"+p,inputFile:"input_"+p,browseButton:e.settings.browse_button};for(r in f){s=i(f[r]);s&&n.removeAllEvents(s,e.id)}n.removeAllEvents(t.body,e.id);n.each(v,function(e,t){u=i("form_"+e);u&&o.removeChild(u)})});T()});s({success:!0})}})})(window,document,plupload);